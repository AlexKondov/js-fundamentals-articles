
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Scope Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../closures/" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../closures/">
            
                <a href="../closures/">
            
                    
                    Closures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../coercion/">
            
                <a href="../coercion/">
            
                    
                    Coercion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../this-keyword/">
            
                <a href="../this-keyword/">
            
                    
                    The "this" Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../new-keyword/">
            
                <a href="../new-keyword/">
            
                    
                    The "new" Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../value-vs-reference/">
            
                <a href="../value-vs-reference/">
            
                    
                    Value vs Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../promises/">
            
                <a href="../promises/">
            
                    
                    Promises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../prototype-and-inheritance/">
            
                <a href="../prototype-and-inheritance/">
            
                    
                    Prototype and Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../event-loop/">
            
                <a href="../event-loop/">
            
                    
                    Event Loop
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Scope</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="scope">Scope</h1>
<blockquote>
<p>Scope is the visibility of functions and variables in the different parts of your code during runtime.</p>
</blockquote>
<p>In other words, the scope of a variable or a function is the part of the code in which it is available. Working with variables and scope comes intuitively to most developers. We have some mental models that help us understand when something can be off limits.</p>
<p>To master the JavaScript language we must be looking to build on top of those existing mental models and go into the specifics. While I&apos;m sure that every developer would do fine writing code without a deep understanding of scope, only those who have put in the time to read the small print will be able to avoid all pitfalls and answer the trickiest interview questions.</p>
<h2 id="types-of-scope">Types of Scope</h2>
<p>In JavaScript there are three types of scope:</p>
<ul>
<li><strong>Global Scope</strong> - variables can be accessed everywhere.</li>
<li><strong>Functon Scope</strong> - variables can be accessed in the boundaries of the function in which they are defined.</li>
<li><strong>Block Scope</strong> - variables can be accessed in the block in which they are defined. A block is separated by <code>{</code> and <code>}</code>.</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> global = <span class="hljs-string">&apos;I am global scoped&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> global = <span class="hljs-string">&apos;I am function scoped&apos;</span>;
    <span class="hljs-built_in">console</span>.log(global); <span class="hljs-comment">// I am function scoped</span>
}

fn(); 
<span class="hljs-built_in">console</span>.log(global); <span class="hljs-comment">// I am global scoped</span>
</code></pre>
<p>As you can see in the example, even though the <code>global</code> variable is assigned a different value inside the function, it is only retained in the boundaries of the same function. Outside of it, the variable has a different value&#x200A; &#x2014; &#x200A;the one declared in the global scope. We also won&apos;t get an error for using the same variable name.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> global = <span class="hljs-string">&apos;global&apos;</span>
<span class="hljs-keyword">const</span> anotherGlobal = <span class="hljs-string">&apos;also global&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">const</span> global = <span class="hljs-string">&apos;function scoped&apos;</span>
    <span class="hljs-built_in">console</span>.log(global) <span class="hljs-comment">// function scope</span>
    <span class="hljs-keyword">const</span> scoped = <span class="hljs-string">&apos;also function scoped&apos;</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inner</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(scoped); <span class="hljs-comment">// also function scope</span>
        <span class="hljs-built_in">console</span>.log(anotherGlobal) <span class="hljs-comment">// also global</span>
    }

    inner();

}

<span class="hljs-built_in">console</span>.log(global) <span class="hljs-comment">// global</span>
<span class="hljs-built_in">console</span>.log(anotherGlobal) <span class="hljs-comment">// also global</span>
<span class="hljs-built_in">console</span>.log(scoped) <span class="hljs-comment">// ReferenceError</span>

fn();
inner(); <span class="hljs-comment">// ReferenceError</span>
</code></pre>
<p>Here we can see that the <code>inner()</code> function will have access to the variables declared in its parent function - <code>fn()</code>. Whenever we need a variable inside a function, the engine will first look for it in the scope of the current function. Then it will go one level up in the function containing it. If it doesn&apos;t find it there it will continue to go up until it reaches the global scope. If the variable is not found there we will get a <code>ReferenceError</code>.</p>
<h2 id="undeclared-variables">Undeclared variables</h2>
<p>JavaScript won&apos;t stop you from using undeclared variables. This means that at any point you can assign a value to a variable without using <code>const</code>, <code>let</code> or <code>var</code>. When you do this the engine will try to look for the variable bubbling up to the global scope. If it doesn&apos;t find it there it will create a global variable for you. </p>
<p>As a rule of thumb, avoid poluting the global scope. If a variable is meant to be globally used then declare it in the global scope so your intentions can be clear. Otherwise keep it inside the scope it is used in.</p>
<h2 id="hoisting">Hoisting</h2>
<p>The hoisting of functions and variables in JavaScript is the reason why we can use some of them before they are actually declared.</p>
<pre><code class="lang-javascript">test(); <span class="hljs-comment">// ???</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;working&apos;</span>);
}
</code></pre>
<p>The code above will log the string <code>&quot;working&quot;</code> even though the function is called before it&apos;s declared.</p>
<p>The common explanation that is given for this behaviour is that function and variable declarations are pulled to the top of <strong>their scope</strong>. So when you try to access them they have already been declared. To the example above will actually become:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;working&apos;</span>);
}

test(); <span class="hljs-comment">// working</span>
</code></pre>
<p>Variables are also hoisted but in a different way. Only the declaration of the variable is &quot;pulled&quot; to the top. The value assignment will stay where it is. In other words, we <strong>can&apos;t</strong> access the value of a variable the same way we can call functions.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// undefined</span>
<span class="hljs-keyword">var</span> test = <span class="hljs-string">&apos;working&apos;</span>
<span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// working?</span>
</code></pre>
<p>This is how the above code will look after the variables were hoisted to the top:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> test;
<span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// undefined</span>
test = <span class="hljs-string">&apos;working&apos;</span>
<span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// working?</span>
</code></pre>
<p>This is why we need to be careful when we are using <strong>function expressions</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// undefined</span>
<span class="hljs-built_in">console</span>.log(test()) <span class="hljs-comment">// TypeError: test is not a function</span>
<span class="hljs-keyword">var</span> test = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;test&apos;</span>)
}
</code></pre>
<p>Again, only the declaration is pulled to the top while the actual assignment of the function as a value will stay where it is. So when we try to call <code>test</code> as a function we will get an error.</p>
<h2 id="block-scope">Block Scope</h2>
<p>In ES6 we got two new variable declaration keywords - <code>let</code> and <code>const</code>. The main difference between them and <code>let</code> is that variables declared with the ES6 keywords are block scoped. This means that they are available only in the code block they were defined in. A code block is separated by curly braces.</p>
<p>Since we are discussing scope, it&apos;s important to note that variables created with <code>let</code> or <code>const</code> are not hoisted. This means that they definition is not pulled to the top like variables declared with <code>var</code>.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">console</span>.log(test) <span class="hljs-comment">// ReferenceError: test is not defined</span>
<span class="hljs-keyword">const</span> test = <span class="hljs-string">&apos;working&apos;</span>
</code></pre>
<p>One way to make sure that your code is free from reference errors is to make sure that you are using only <code>let</code> and <code>const</code> for variable declaration.</p>
<h2 id="compilation">Compilation</h2>
<p>Now that we understand the concept of hoisting we will look into the internals of the language and understand how it actually works. The V8 engine increases performance by compiling JavaScript to mchine code before executing it. What happens in the process of compilation is that the engine makes multiple runs through our code. In one of the early runs it will declare all functions and variables. So when the code is executed they will already be defined.</p>
<p>So, hoisting is actually a mental image to help us illustrate why we can access functions and variables before they are defined. The common explanation of hoisting is just a picture of how code is reorganized before execution. When the engine is actually executing our code our function and variable declarations are no longer there at all. They have already been declared in a previous run.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The concept of scope comes intuitively to developers, but in order to achieve mastery in a language we must be aware of its specifics. The things that we need to keep in mind as JavaScript developers are:</p>
<ul>
<li><strong>Undeclared Variables</strong></li>
<li><strong>Block Scoped Variables</strong></li>
<li><strong>Hoisting</strong></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../closures/" class="navigation navigation-next " aria-label="Next page: Closures">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Scope","level":"1.2","depth":1,"next":{"title":"Closures","level":"1.3","depth":1,"path":"closures/README.md","ref":"closures/README.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"scope/README.md","mtime":"2018-07-08T14:06:54.248Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-07-08T12:48:54.480Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

