
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Promises Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../prototype-and-inheritance/" />
    
    
    <link rel="prev" href="../value-vs-reference/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../scope/">
            
                <a href="../scope/">
            
                    
                    Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../closures/">
            
                <a href="../closures/">
            
                    
                    Closures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../coercion/">
            
                <a href="../coercion/">
            
                    
                    Coercion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../this-keyword/">
            
                <a href="../this-keyword/">
            
                    
                    The "this" Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../new-keyword/">
            
                <a href="../new-keyword/">
            
                    
                    The "new" Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../value-vs-reference/">
            
                <a href="../value-vs-reference/">
            
                    
                    Value vs Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8" data-path="./">
            
                <a href="./">
            
                    
                    Promises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../prototype-and-inheritance/">
            
                <a href="../prototype-and-inheritance/">
            
                    
                    Prototype and Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../event-loop/">
            
                <a href="../event-loop/">
            
                    
                    Event Loop
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Promises</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="promises">Promises</h1>
<p>Promises are a  relatively new feature to JavaScript and can be a bit hard to grasp at first. Essentialy, a Promise represents a future action. Something that will happen in the future but you are not yet sure what will be the outcome of it. It may happen or it may fail, but you do not yet know that. Therefore we can say that a Promise has three possible states:</p>
<ul>
<li>pending</li>
<li>succeeded</li>
<li>failed</li>
</ul>
<p>When we construct a promise we need to provide it with a function that takes two parameters - <code>ressolve</code> and <code>reject</code>. Of course, they can be called any way we want but this is the accepted naming convention. Those two values are functions which we can call from our Promise to signal if it succeeds or fails.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> mood = <span class="hljs-string">&apos;happy&apos;</span>

<span class="hljs-keyword">const</span> goingOut = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
  <span class="hljs-keyword">if</span> (mood === <span class="hljs-string">&apos;happy&apos;</span>) {
    resolve()
  } <span class="hljs-keyword">else</span> {
    reject()
  }
})
</code></pre>
<p>The way we consume a promise is to specify what will happen after it succeeds or fails.</p>
<pre><code class="lang-javascript">goingOut
  .then(() =&gt; <span class="hljs-comment">/* The promise resolved successfuly, we take some action */</span>)
  .catch(() =&gt; <span class="hljs-comment">/* The promise got rejected, so we can handle the error */</span>)
</code></pre>
<p>Promises can also pass values when they resolve or are being rejected.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> goingOut = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
  <span class="hljs-keyword">if</span> (mood === <span class="hljs-string">&apos;happy&apos;</span>) {
    resolve(<span class="hljs-string">&apos;We are going out.&apos;</span>)
  } <span class="hljs-keyword">else</span> {
    reject(<span class="hljs-string">&apos;We are staying home...&apos;</span>)
  }
})

goingOut
  .then(msg =&gt; <span class="hljs-built_in">console</span>.log(msg)) <span class="hljs-comment">// We are going out.</span>
  .catch(err =&gt; <span class="hljs-built_in">console</span>.log(err)) <span class="hljs-comment">// We are staying home...</span>
</code></pre>
<p>Promises provide a clean API when you need to chain a few operations together. We can call a function inside <code>then</code> and if the returned value is a promise we can chain it to another <code>then</code>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> pickDestination = (msg) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
    <span class="hljs-comment">// Do something here...</span>
    resolve(<span class="hljs-string">`<span class="hljs-subst">${msg}</span> We are going to a restaurant.`</span>)
  })
}

goingOut
  .then(pickDestination)
  .then(msg =&gt; <span class="hljs-built_in">console</span>.log(msg)) <span class="hljs-comment">// We are going out. We are going to a restaurant.</span>
</code></pre>
<p>If we want to return a resolved or rejected promise we can use the <code>.resolve</code> and <code>.reject</code> functions on the <code>Promise</code> object directly. The <code>pickDestination</code> function will then look like this.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> pickDestination = (msg) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">`<span class="hljs-subst">${msg}</span> We are going to a restaurant.`</span>)
}
</code></pre>
<p>Promises are used mostly for asynchronous operations. Tasks such as a request to a service that you are not sure exactly when are going to be completed or if they will succeed.</p>
<h2 id="es7---asyncawait">ES7 - async/await</h2>
<p>In ES7 we can use the async/await syntax for asynchronous operations. The benefits of the new keywords is that our asynchronous code will look more synchronous and we can handle errors using simplle try/catch blocks.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">willGoOut</span> = (<span class="hljs-params"></span>) =&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> goingOut = <span class="hljs-keyword">await</span> goingOut()
    <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">await</span> pickDestination(goingOut)
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.log(err) <span class="hljs-comment">// We will be staying home.</span>
  }
}
</code></pre>
<p>Each function in which you want to take advantage of <code>await</code> must be specified as <code>async</code>. Another thing to be aware of is that each <code>await</code> will pause the execution of your program. Chaining a few awaits one after another can lead to slow execution.</p>
<p>In cases in which you need multiple requests resolved, which are not depending on each other, you can use <code>Promise.all</code></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> [ value1, value2 ] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
  firstRequest(),
  secondRequest()
])
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../value-vs-reference/" class="navigation navigation-prev " aria-label="Previous page: Value vs Reference">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../prototype-and-inheritance/" class="navigation navigation-next " aria-label="Next page: Prototype and Inheritance">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Promises","level":"1.8","depth":1,"next":{"title":"Prototype and Inheritance","level":"1.9","depth":1,"path":"prototype-and-inheritance/README.md","ref":"prototype-and-inheritance/README.md","articles":[]},"previous":{"title":"Value vs Reference","level":"1.7","depth":1,"path":"value-vs-reference/README.md","ref":"value-vs-reference/README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"promises/README.md","mtime":"2018-07-08T12:48:39.471Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-07-08T12:48:54.480Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

